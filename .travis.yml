language: r
sudo: required
cache: packages
warnings_are_errors: false
dist: trusty

r_packages:
  - rmarkdown
  - BayesianFirstAid
  - onewaytests 
  - ggplot2
os:
  - linux
after_success:
- if [[ "$TRAVIS_PULL_REQUEST" == "false" && "$TRAVIS_BRANCH" == "master" && "$TRAVIS_EVENT_TYPE"
  != "cron" ]] ; then R --no-save <<< "rmarkdown::render('index.Rmd')";
  git checkout master; export TRAVIS_COMMIT_MSG="$(git log --format=%B --no-merges
  -n 1)"; git config --global user.name "Travis CI"; git config --global user.email
  "$COMMIT_AUTHOR_EMAIL"; git config credential.helper "store --file=.git/credentials";
  echo "https://${GH_TOKEN}:@github.com" >> .git/credentials; git config push.default
  matching; git add --force index.html; git rm -r --cached $(find . -type d -name "*_cache");
  git commit index.html -m "update auto-rendering to html [ci]" -m "$TRAVIS_COMMIT_MSG"
  || true; git push; fi;
